<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1.0" name="viewport"/>
<title>IFWL F1 Leaderboard</title>
<style>
.driver-cell {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.driver-number {
  font-size: 2rem;
  font-weight: bold;
  font-style: italic;
  color: black;
  min-width: 3rem;
  text-align: right;
}

.car-image {
  height: 40px;
  margin-right: 0.5rem;
}
.driver-number {
  font-weight: bold;
  font-size: 1.5rem;
  margin-right: 0.5rem;
  font-style: italic;
  color: black;
  display: inline-block;
  min-width: 3rem;
  text-align: right;
}
    body {
      margin:0; padding:20px;
      font-family:Arial,sans-serif;
      background:url('ifwl_bg.webp')no-repeat center center fixed;
      background-size:cover;
    }
    h1,h2 { text-align:center; color:#000; margin:8px 0; }
    .version {
      position:fixed; top:10px; left:10px;
      background:rgba(255,255,255,0.7); padding:2px 6px;
      font-size:0.8em; border-radius:4px;
    }
    .header {
      display:flex; align-items:center; justify-content:center;
      gap:20px; margin-bottom:10px;
    }
    .header img { height:48px; }
    .join-series { text-align:center; margin:12px 0; }
    .join-series a {
      background:#1B1443; color:#fff; text-decoration:none;
      padding:10px 20px; border-radius:4px; font-weight:bold;
    }
    table {
      width:100%; border-collapse:collapse;
      background:rgba(0,0,0,0.75); margin:20px 0;
      border-radius:8px; overflow:hidden; color:#fff;
    }
    th, td {
      padding:10px; text-align:center;
      border-bottom:1px solid #333;
    }
    th {
      background:#333; text-transform:uppercase; font-weight:bold;
    }
    tr:hover { background:rgba(255,255,255,0.1); }

    /* car & logo images */
    img.car {
      height:48px; vertical-align:middle; margin:0 8px 0 0;
    }
    img.logo {
      height:40px; float:right; margin-left:10px;
      opacity:1!important; filter:none!important;
    }

    /* driver number â€” no box, big bold italic black */
.driver-number {
  display: inline-block;
  font-size: 4em;           /* bump up as large as you like */
  font-weight: bold;
  font-style: italic;
  line-height: 1;
  color: #000;                /* pure black text */
  background: none;           /* remove the grey box */
  padding: 0;                 /* no extra space */
  margin-right: 8px;          /* keep a little gap to the car */
  vertical-align: middle;
  border-radius: 0;           /* no rounding */
}

    /* Team Colours */
    .team-ALPINE         { background-color:#0090FF; }
    .team-ASTON-MARTIN  { background-color:#004940; }
    .team-KICK-SAUBER   { background-color:#000000; }
    .team-RED-BULL-RACING,
    .team-RACING-BULLS  { background-color:#1B1443; }
    .team-MERCEDES      { background-color:#00D2BE; }
    .team-MCLAREN       { background-color:#FF8700; }
    .team-FERRARI       { background-color:#790004; }
    .team-HAAS          { background-color:#B6BABD; }
    .team-WILLIAMS      { background-color:#005AFF; }
    .team-RESERVE       { background-color:#FFFFFF; color:#000; }
  
.arrow-icon {
  height: 64px;
  width: 64px;
  margin-left: 6px;
  vertical-align: middle;
}
</style>
</head>
<body>
<div class="version">Version: Beta 0.0.71 (Full Guarded Replace Fix)</div>
<div class="header">
<img alt="IFWL Logo" src="ifwl_logo.png"/>
<h1>IFWL F1 Leaderboard</h1>
<img alt="IFWL Logo" src="ifwl_logo.png"/>
</div>
<div class="join-series">
<a href="https://www.thesimgrid.com/championships/15239" target="_blank">
      Join our latest series here
    </a>
</div>
<h2>Driver Standings</h2>
<table id="driver-table">
<thead>
<tr><th>DRIVER</th><th>TEAM</th><th>TOTAL POINTS</th></tr>
</thead>
<tbody></tbody>
</table>
<h2>Constructors Standings</h2>
<table id="constructor-table">
<thead>
<tr><th>TEAM</th><th>TOTAL POINTS</th></tr>
</thead>
<tbody></tbody>
</table>
<h2>Unassigned Drivers</h2>
<table id="unassigned-table">
<thead><tr><th>DRIVER</th></tr></thead>
<tbody></tbody>
</table>
<script>
const sheetId = "1OxEy3fx4fW1P-aPlU-AHlPR8r23KJieLKxdtKy4koog";
const teamCars = {
  "ALPINE":"ALPINE.webp",
  "ASTON MARTIN":"ASTON.webp",
  "FERRARI":"FERRARI.webp",
  "HAAS":"HAAS.webp",
  "MCLAREN":"MCLAREN.webp",
  "MERCEDES":"MERCEDES.webp",
  "RACING BULLS":"RACINGBULLS.webp",
  "RED BULL RACING":"RBR.webp",
  "KICK SAUBER":"SAUBER.webp",
  "RESERVE":"RESERVE.webp",
  "WILLIAMS":"WILLIAMS.webp"
};
const teamLogos = {
  "ALPINE":"ALPINELOGO.webp",
  "ASTON MARTIN":"ASTONLOGO.webp",
  "FERRARI":"FERARRILOGO.webp",
  "HAAS":"HAASLOGO.webp",
  "MCLAREN":"MCLARENLOGO.webp",
  "MERCEDES":"MERCEDESLOGO.webp",
  "RACING BULLS":"RBLOGO.webp",
  "RED BULL RACING":"RBRLOGO.webp",
  "KICK SAUBER":"KICKLOGO.webp",
  "RESERVE":"RESERVELOGO.webp",
  "WILLIAMS":"WILLIAMSLOGO.webp"
};

const safeClass = t => "driver-row team-" + t.replace(/\s+/g,"-");

fetch(`https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&ts=${Date.now()}`)
  .then(r => r.text())
  .then(text => JSON.parse(text.substring(47).slice(0, -2)))
  .then(json => {
    const rows = json.table.rows;
    const driverTable = document.querySelector("#driver-standings");

    rows.forEach(row => {
      const name = row.c[0]?.v?.trim();
      const team = row.c[1]?.v?.trim().toUpperCase();
      const points = row.c[18]?.v || 0;
      const numberMatch = name ? name.match(/\[\s?(\d+)\s?\]/) : null;
      const driverNumber = numberMatch ? numberMatch[1] : "";

      const tr = document.createElement("tr");
      tr.className = safeClass(team);

      const nameTd = document.createElement("td");
      nameTd.className = "driver-cell";
      const carImg = teamCars[team] || "";
      nameTd.innerHTML = `
        <div class="driver-info">
          <span class="driver-number">${driverNumber}</span>
          <img src="${carImg}" class="car-img" />
          <span class="driver-name">${name ? name.replace(/\[.*?\]\s*-\s*/, "") : "Unnamed Driver"}</span>
        </div>
      `;

      const teamTd = document.createElement("td");
      teamTd.innerHTML = `
        ${team in teamLogos ? `<img src="${teamLogos[team]}" class="logo-img">` : ""}<span>${team}</span>
      `;

      const pointsTd = document.createElement("td");
      pointsTd.textContent = points;

      tr.appendChild(nameTd);
      tr.appendChild(teamTd);
      tr.appendChild(pointsTd);
      driverTable.appendChild(tr);
    });
  });
</script>
</body>
</html>
