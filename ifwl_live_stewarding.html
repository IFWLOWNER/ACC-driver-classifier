
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IFWL Live Stewarding Panel</title>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script>
    google.charts.load('current', { packages: ['table'] });
    google.charts.setOnLoadCallback(drawTable);

    function drawTable() {
      const query = new google.visualization.Query(
        'https://docs.google.com/spreadsheets/d/15FEmqFgTX7uOai8Yc8gpZXAr97FjGksQfxNpYf_2gew/gviz/tq?sheet=Race%201'
      );

      // Select specific columns: C (Replay Time), D (Cars), F (Ruling), H (Description), I (Resolved)
      query.setQuery('SELECT C, D, F, H, I WHERE C IS NOT NULL');
      query.send(handleQueryResponse);
    }

    function handleQueryResponse(response) {
      if (response.isError()) {
        document.getElementById('table_div').innerHTML = 'Error fetching data.';
        return;
      }

      const data = response.getDataTable();
      const table = new google.visualization.Table(document.getElementById('table_div'));

      table.draw(data, {
        showRowNumber: true,
        width: '100%',
        height: '100%',
        cssClassNames: {
          headerRow: 'bg-gray-800 text-white text-left',
          tableRow: 'bg-white',
          oddTableRow: 'bg-gray-100',
          headerCell: 'font-semibold p-2',
          tableCell: 'p-2',
        },
      });
    }

    // Auto-refresh every 20 seconds
    setInterval(drawTable, 20000);
  </script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white min-h-screen p-6">
  <div class="max-w-6xl mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-center">üõ†Ô∏è IFWL Stewarding Panel - Live Updates</h1>
    <div id="table_div" class="bg-white rounded-xl p-4 shadow-lg text-black"></div>
    <p class="text-center text-sm text-gray-400 mt-6">Auto-refreshes every 20 seconds</p>
  </div>
</body>
</html>
